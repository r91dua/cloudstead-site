/* Updated styles to reduce gradient banding and improve scroll performance
   - promote layers to their own compositor: translateZ(0), will-change, backface-visibility
   - smoother gradients with additional stops
   - subtle SVG noise dither overlay via .dither (non-destructive; can be toggled)
   - font-smoothing and reduced-motion fallback
*/

/* ---------- Global & font smoothing ---------- */
:root{
  --dither-opacity: 0.04; /* tweak to taste 0.02-0.06 */
  --transition-ease: cubic-bezier(.2,.9,.2,1);
}

/* font smoothing */
html, body {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-text-size-adjust: 100%;
  background-color: #071029; /* fallback */
  height: 100%;
  min-height: 100%;
}

/* ---------- Helpers to force hardware compositing ---------- */
/* Use these on elements that move/animate while scrolling (hero, parallax layers, translucent overlays) */
.layer-promote {
  /* promote to its own layer to avoid repaint/re-raster on scroll */
  transform: translateZ(0);
  will-change: transform, opacity;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  -webkit-transform: translateZ(0);
  /* keep outline/positioning neutral */
  outline: 1px solid transparent; /* sometimes helps with compositing bugs */
}

/* Parallax layers / moving backgrounds */
.parallax-layer {
  position: relative;
  pointer-events: none;
  transform: translateZ(0);
  will-change: transform;
  backface-visibility: hidden;
  -webkit-transform: translateZ(0);
}

/* ---------- Improved gradients ---------- */
/* Use more stops, subtle alpha blending, and avoid tiny one-step stops */
.gradient-smooth {
  /* Example: vertical hero gradient â€” replace colors with your theme */
  background-image:
    linear-gradient(
      180deg,
      rgba(6,12,27,1) 0%,
      rgba(10,18,36,1) 10%,
      rgba(14,30,55,1) 25%,
      rgba(20,60,100,1) 48%,
      rgba(27,95,150,1) 70%,
      rgba(48,145,200,1) 88%,
      rgba(72,190,245,1) 100%
    );
  background-repeat: no-repeat;
  background-size: cover;
  /* small subtle overlay to reduce banding without changing colors */
  background-blend-mode: normal;
  /* encourage GPU compositing */
  transform: translateZ(0);
  will-change: background-position, opacity;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* Example hero selector: apply both gradient smoothing and compositing promotion */
.hero, .masthead, .site-hero {
  /* keep semantics: use your existing .hero selector if different */
  display: block;
  width: 100%;
  min-height: 60vh;
  position: relative;
  overflow: hidden;
}
.hero .gradient-inner {
  composes: gradient-smooth layer-promote;
  /* fallback background color for very old browsers */
  background-color: #071029;
}

/* ---------- Dither / noise overlay (SVG) ---------- */
/* Add .dither to the container to place a subtle noise overlay that blends with the gradient.
   Implementation uses a pseudo-element so you don't need extra markup.
   Tweak --dither-opacity to increase/decrease effect. */
.dither {
  position: relative;
  isolation: isolate; /* keep blending predictable */
}
.dither::after {
  content: "";
  position: absolute;
  inset: 0; /* shorthand for top:0;right:0;bottom:0;left:0; */
  pointer-events: none;
  mix-blend-mode: overlay; /* or try soft-light / multiply */
  opacity: var(--dither-opacity);
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'><filter id='n'><feTurbulence baseFrequency='0.8' numOctaves='1' stitchTiles='stitch'/><feColorMatrix type='saturate' values='0'/></filter><rect width='100%' height='100%' filter='url(%23n)' /></svg>");
  background-repeat: repeat;
  background-size: 120px 120px;
  /* ensure the overlay sits above background but below content */
  z-index: 1;
  /* keep overlay on its own composited layer */
  transform: translateZ(0);
  will-change: opacity;
}

/* If your container has content, ensure content is above the dither overlay */
.dither > * {
  position: relative;
  z-index: 2;
}

/* ---------- Reduce heavy translucent stacking ---------- */
/* Large translucent layers over gradients intensify banding. Prefer subtle overlays or use solid colors when possible. */
.overlay-soft {
  background-color: rgba(0,0,0,0.12); /* small opacity */
  box-shadow: none; /* avoid huge blurred shadows over gradients */
  transform: translateZ(0);
  will-change: opacity;
}

/* ---------- Box-shadow guidelines ---------- */
/* Use smaller, crisper shadows. Big, very soft shadows over gradients cause additional banding. */
.shadow-soft {
  box-shadow: 0 6px 18px rgba(2,6,23,0.35);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* ---------- Example small utility: animated gradient (optional) ---------- */
.gradient-animated {
  background-image: linear-gradient(120deg,
    rgba(10,20,40,1) 0%,
    rgba(14,34,60,1) 25%,
    rgba(20,70,120,1) 50%,
    rgba(14,34,60,1) 75%,
    rgba(10,20,40,1) 100%);
  background-size: 400% 400%;
  animation: gradientShift 16s var(--transition-ease) infinite;
  transform: translateZ(0);
  will-change: background-position;
  backface-visibility: hidden;
}
@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* ---------- Accessibility: respect reduced motion ---------- */
@media (prefers-reduced-motion: reduce) {
  .gradient-animated {
    animation: none;
    background-size: cover;
  }
  * {
    transition: none !important;
  }
}

/* ---------- Example usage mapping for common site elements ----------
.hero              -> .hero .gradient-inner { add .gradient-smooth and .layer-promote }
.header-bg         -> .header { add .gradient-smooth; optionally .dither }
.parallax layers   -> <div class="parallax-layer layer-promote"> ... </div>
If you want the noise always on, add .dither to the gradient container (.hero, .masthead, etc.)
--------------------------------------------------------------------- */

/* ---------- Optional: color variables (uncomment and adapt) ----------
:root {
  --bg-900: #061226;
  --bg-800: #0a1224;
  --accent-500: #2aa6f2;
}
--------------------------------------------------------------------- */
